<!DOCTYPE html>
<html lang="en">
  <head> 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DCP Monte Carlo Simulation</title>
    <link rel="stylesheet" href="style.css">
    <script src="http://scheduler.dev.robert.office.distributive.network/dcp-client/dcp-client.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="text/javascript" id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
  </head>
  <body>
    <h1>Monte Carlo Distributions with DCP</h1>
    <div id="plotContainer">
      <canvas id="myCanvas"></canvas>
    </div>
    <form id="addDataSetForm">
      <button id="submitButton" type="submit">Add New Dataset</button>
      <p id="numIterations"></p>
    </form>
    <div id="latexContainer">
      <p>Formula for simulation: </p>
      <div id="formula"></div>
    </div>
    <script type="module">
      import { createChart } from './chart.js';
      import { setupForm } from './form.js';
      import { fetchData } from './data.js';
      import { createSimpleShapeData } from './utils.js';
      document.addEventListener("DOMContentLoaded", async () => {
        // Fetch job data
        const filePath = '../out.json';
        const modelResults = await fetchData(filePath);

        const { unitCircleData, squareData } = createSimpleShapeData();

        const ctx = document.getElementById("myCanvas").getContext("2d");
        plotContainer.innerHTML = ""; // Clear previous chart
        plotContainer.appendChild(ctx.canvas);
        const chart = createChart(unitCircleData, squareData)
        setupForm(modelResults, chart);
      });
    </script>
  </body>
</html>